<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>基于 ChatGPT 的 Prompt 工程：定制化任务 | LuoRongLuoRong</title><meta name="author" content="LuoRongLuoRong"><meta name="copyright" content="LuoRongLuoRong"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="本文是《基于 ChatGPT 的 Prompt 工程》系列课程的第五讲，本文将介绍使用模型实施一些定制化任务，如给客户回复量身定制的邮件，个性化的聊天机器人。">
<meta property="og:type" content="article">
<meta property="og:title" content="基于 ChatGPT 的 Prompt 工程：定制化任务">
<meta property="og:url" content="https://luorongluorong.github.io/2023/05/05/llm/chatgpt_prompt_engineering/lec05_chatbot/index.html">
<meta property="og:site_name" content="LuoRongLuoRong">
<meta property="og:description" content="本文是《基于 ChatGPT 的 Prompt 工程》系列课程的第五讲，本文将介绍使用模型实施一些定制化任务，如给客户回复量身定制的邮件，个性化的聊天机器人。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://luorongluorong.github.io/static/llm/chatgpt_prompt.jpg">
<meta property="article:published_time" content="2023-05-05T04:39:19.000Z">
<meta property="article:modified_time" content="2023-05-05T15:56:35.460Z">
<meta property="article:author" content="LuoRongLuoRong">
<meta property="article:tag" content="ChatGPT">
<meta property="article:tag" content="Prompt">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://luorongluorong.github.io/static/llm/chatgpt_prompt.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://luorongluorong.github.io/2023/05/05/llm/chatgpt_prompt_engineering/lec05_chatbot/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '基于 ChatGPT 的 Prompt 工程：定制化任务',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-05-05 23:56:35'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = url => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      link.onload = () => resolve()
      link.onerror = () => reject()
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="LuoRongLuoRong" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">33</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">53</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/guestbook/"><i class="fa-fw fa fa-book"></i><span> 留言</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/static/llm/chatgpt_prompt.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="LuoRongLuoRong"><span class="site-name">LuoRongLuoRong</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/guestbook/"><i class="fa-fw fa fa-book"></i><span> 留言</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">基于 ChatGPT 的 Prompt 工程：定制化任务</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">发表于</span><time datetime="2023-05-05T04:39:19.000Z" title="发表于 2023-05-05 12:39:19">2023-05-05</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">2.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>9分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="基于 ChatGPT 的 Prompt 工程：定制化任务"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>本文是《基于 ChatGPT 的 Prompt 工程》系列课程的第五讲，本文将介绍使用模型实施一些定制化任务，如给客户回复量身定制的邮件，个性化的聊天机器人。</p>
<h1 id="量身定制的邮件"><a href="#量身定制的邮件" class="headerlink" title="量身定制的邮件"></a>量身定制的邮件</h1><blockquote>
<p>generate customer service emails that are tailored to each customer’s review.</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># given the sentiment from the lesson on &quot;inferring&quot;,</span></span><br><span class="line"><span class="comment"># and the original customer message, customize the email</span></span><br><span class="line">sentiment = <span class="string">&quot;negative&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># review for a blender</span></span><br><span class="line">review = <span class="string">f&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">So, they still had the 17 piece system on seasonal sale for around $49 in the month of November, about half off, but for some reason (call it price gouging) around the second week of December the prices all went up to about anywhere from between $70-$89 for the same system. And the 11 piece system went up around $10 or so in price also from the earlier sale price of $29. So it looks okay, but if you look at the base, the part where the blade locks into place doesn’t look as good as in previous editions from a few years ago, but I plan to be very gentle with it (example, I crush very hard items like beans, ice, rice, etc. in the blender first then pulverize them in the serving size I want in the blender then switch to the whipping blade for a finer flour, and use the cross cutting blade first when making smoothies, then use the flat blade if I need them finer/less pulpy). Special tip when making smoothies, finely cut and freeze the fruits and vegetables (if using spinach-lightly stew soften the spinach then freeze until ready for use-and if making sorbet, use a small to medium sized food processor) that you plan to use that way you can avoid adding so much ice if at all-when making your smoothie. After about a year, the motor was making a funny noise. I called customer service but the warranty expired already, so I had to buy another one. FYI: The overall quality has gone done in these types of products, so they are kind of counting on brand recognition and consumer loyalty to maintain sales. Got it in about two days.</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 中文：因此，他们仍然有17件系统的季节性销售约49美元在11月，约半价，但出于某种原因(称之为价格欺诈)在12月的第二个星期左右，价格全部上升到大约70-89美元之间的任何地方为同一系统。而且11件系统的价格也比之前29美元的售价上涨了10美元左右。所以它看起来不错，但是如果你看看底部，刀片锁定到位的部分看起来不像前几年的版本那么好，但是我计划对它非常温和(例如，我先在搅拌机里碾碎非常硬的东西，像豆子，冰，大米等，然后在搅拌机里按照我想要的大小把它们碾碎，然后切换到搅拌刀片，得到更细的面粉，在做冰沙时先用横切刀片，如果我需要更细/更少的浆状，那么使用平刀片)。制作冰沙时的特别提示: 将水果和蔬菜切碎并冷冻(如果使用菠菜——略微炖一下使菠菜软化，然后冷冻直到可以使用——如果制作冰沙，使用一个中小型食品加工机) ，这样你就可以避免在制作冰沙时加入过多的冰块。大约一年后，发动机发出了奇怪的声音。我打电话给客服，但是保修期已经过了，所以我不得不再买一个。仅供参考: 这类产品的整体质量已经下降，所以他们需要依靠品牌知名度和消费者忠诚度来维持销售。大概两天后拿到的。</span></span><br><span class="line"></span><br><span class="line">prompt = <span class="string">f&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">You are a customer service AI assistant.</span></span><br><span class="line"><span class="string">Your task is to send an email reply to a valued customer.</span></span><br><span class="line"><span class="string">Given the customer email delimited by ```, Generate a reply to thank the customer for their review.</span></span><br><span class="line"><span class="string">If the sentiment is positive or neutral, thank them for their review.</span></span><br><span class="line"><span class="string">If the sentiment is negative, apologize and suggest that they can reach out to customer service. </span></span><br><span class="line"><span class="string">Make sure to use specific details from the review.</span></span><br><span class="line"><span class="string">Write in a concise and professional tone.</span></span><br><span class="line"><span class="string">Sign the email as `AI customer agent`.</span></span><br><span class="line"><span class="string">Customer review: ```<span class="subst">&#123;review&#125;</span>```</span></span><br><span class="line"><span class="string">Review sentiment: <span class="subst">&#123;sentiment&#125;</span></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">response = get_completion(prompt)</span><br><span class="line"><span class="built_in">print</span>(response)</span><br></pre></td></tr></table></figure>
<p>提示词的中文是：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">你是一个客户服务人工智能助理。您的任务是发送电子邮件回复到一个有价值的客户。</span><br><span class="line"></span><br><span class="line">由于客户电子邮件由 ``` 分隔,生成一个回复来感谢客户的评审。</span><br><span class="line"></span><br><span class="line">如果情绪是积极的或中性的，感谢他们他们的评论。</span><br><span class="line"></span><br><span class="line">如果情绪是消极的，道歉并建议他们可以联系客户服务。</span><br><span class="line"></span><br><span class="line">确保使用评审中的具体细节。用简洁专业的语气写作。</span><br><span class="line"></span><br><span class="line">签署电子邮件为“人工智能客户代理”。</span><br></pre></td></tr></table></figure></p>
<h2 id="temperature"><a href="#temperature" class="headerlink" title="temperature"></a>temperature</h2><p>temperature 参数值是 0 到 1 之间的浮点数，默认值为 0，这表明模型是可靠的、可预测的；大于 0 则表示模型会更具备多样性。</p>
<p>如果把 response 换成 <code>response = get_completion(prompt, temperature=0.7)</code>，模型的表现会更有创造性。</p>
<h1 id="聊天机器人"><a href="#聊天机器人" class="headerlink" title="聊天机器人"></a>聊天机器人</h1><p>准备工作：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> openai</span><br><span class="line"><span class="keyword">from</span> dotenv <span class="keyword">import</span> load_dotenv, find_dotenv</span><br><span class="line">_ = load_dotenv(find_dotenv()) <span class="comment"># read local .env file</span></span><br><span class="line"></span><br><span class="line">openai.api_key  = os.getenv(<span class="string">&#x27;OPENAI_API_KEY&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_completion</span>(<span class="params">prompt, model=<span class="string">&quot;gpt-3.5-turbo&quot;</span></span>):</span><br><span class="line">    messages = [&#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>, <span class="string">&quot;content&quot;</span>: prompt&#125;]</span><br><span class="line">    response = openai.ChatCompletion.create(</span><br><span class="line">        model=model,</span><br><span class="line">        messages=messages,</span><br><span class="line">        temperature=<span class="number">0</span>, <span class="comment"># this is the degree of randomness of the model&#x27;s output</span></span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">return</span> response.choices[<span class="number">0</span>].message[<span class="string">&quot;content&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_completion_from_messages</span>(<span class="params">messages, model=<span class="string">&quot;gpt-3.5-turbo&quot;</span>, temperature=<span class="number">0</span></span>):</span><br><span class="line">    response = openai.ChatCompletion.create(</span><br><span class="line">        model=model,</span><br><span class="line">        messages=messages,</span><br><span class="line">        temperature=temperature, <span class="comment"># this is the degree of randomness of the model&#x27;s output</span></span><br><span class="line">    )</span><br><span class="line"><span class="comment">#     print(str(response.choices[0].message))</span></span><br><span class="line">    <span class="keyword">return</span> response.choices[<span class="number">0</span>].message[<span class="string">&quot;content&quot;</span>]</span><br></pre></td></tr></table></figure>
<h2 id="聊天机器人-1"><a href="#聊天机器人-1" class="headerlink" title="聊天机器人"></a>聊天机器人</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">messages =  [  </span><br><span class="line"><span class="comment"># 系统对 model 说：你是个友好的机器人</span></span><br><span class="line">&#123;<span class="string">&#x27;role&#x27;</span>:<span class="string">&#x27;system&#x27;</span>, <span class="string">&#x27;content&#x27;</span>:<span class="string">&#x27;You are friendly chatbot.&#x27;</span>&#125;,    </span><br><span class="line"><span class="comment"># 用户对 model 说：你好，我是 Isa。</span></span><br><span class="line">&#123;<span class="string">&#x27;role&#x27;</span>:<span class="string">&#x27;user&#x27;</span>, <span class="string">&#x27;content&#x27;</span>:<span class="string">&#x27;Hi, my name is Isa&#x27;</span>&#125;  ]</span><br><span class="line">response = get_completion_from_messages(messages, temperature=<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(response)</span><br></pre></td></tr></table></figure>
<p>模型回复：Hello！</p>
<h2 id="点餐机器人"><a href="#点餐机器人" class="headerlink" title="点餐机器人"></a>点餐机器人</h2><p>需要记住上下文。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">collect_messages</span>(<span class="params">_</span>):</span><br><span class="line">    prompt = inp.value_input</span><br><span class="line">    inp.value = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    context.append(&#123;<span class="string">&#x27;role&#x27;</span>:<span class="string">&#x27;user&#x27;</span>, <span class="string">&#x27;content&#x27;</span>:<span class="string">f&quot;<span class="subst">&#123;prompt&#125;</span>&quot;</span>&#125;)</span><br><span class="line">    response = get_completion_from_messages(context) </span><br><span class="line">    context.append(&#123;<span class="string">&#x27;role&#x27;</span>:<span class="string">&#x27;assistant&#x27;</span>, <span class="string">&#x27;content&#x27;</span>:<span class="string">f&quot;<span class="subst">&#123;response&#125;</span>&quot;</span>&#125;)</span><br><span class="line">    panels.append(</span><br><span class="line">        pn.Row(<span class="string">&#x27;User:&#x27;</span>, pn.pane.Markdown(prompt, width=<span class="number">600</span>)))</span><br><span class="line">    panels.append(</span><br><span class="line">        pn.Row(<span class="string">&#x27;Assistant:&#x27;</span>, pn.pane.Markdown(response, width=<span class="number">600</span>, style=&#123;<span class="string">&#x27;background-color&#x27;</span>: <span class="string">&#x27;#F6F6F6&#x27;</span>&#125;)))</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> pn.Column(*panels)</span><br><span class="line">```    </span><br><span class="line"></span><br><span class="line">下面的代码中，系统对 model 说：你是个点餐机器人，要先对用户打招呼，然后点餐。</span><br><span class="line">```py</span><br><span class="line"><span class="keyword">import</span> panel <span class="keyword">as</span> pn  <span class="comment"># GUI</span></span><br><span class="line">pn.extension()</span><br><span class="line"></span><br><span class="line">panels = [] <span class="comment"># collect display </span></span><br><span class="line"></span><br><span class="line">context = [ &#123;<span class="string">&#x27;role&#x27;</span>:<span class="string">&#x27;system&#x27;</span>, <span class="string">&#x27;content&#x27;</span>:<span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">You are OrderBot, an automated service to collect orders for a pizza restaurant. \</span></span><br><span class="line"><span class="string">You first greet the customer, then collects the order, \</span></span><br><span class="line"><span class="string">and then asks if it&#x27;s a pickup or delivery. \</span></span><br><span class="line"><span class="string">You wait to collect the entire order, then summarize it and check for a final time if the customer wants to add anything else. \</span></span><br><span class="line"><span class="string">If it&#x27;s a delivery, you ask for an address. \</span></span><br><span class="line"><span class="string">Finally you collect the payment.\</span></span><br><span class="line"><span class="string">Make sure to clarify all options, extras and sizes to uniquely \</span></span><br><span class="line"><span class="string">identify the item from the menu.\</span></span><br><span class="line"><span class="string">You respond in a short, very conversational friendly style. \</span></span><br><span class="line"><span class="string">The menu includes \</span></span><br><span class="line"><span class="string">pepperoni pizza  12.95, 10.00, 7.00 \</span></span><br><span class="line"><span class="string">cheese pizza   10.95, 9.25, 6.50 \</span></span><br><span class="line"><span class="string">eggplant pizza   11.95, 9.75, 6.75 \</span></span><br><span class="line"><span class="string">fries 4.50, 3.50 \</span></span><br><span class="line"><span class="string">greek salad 7.25 \</span></span><br><span class="line"><span class="string">Toppings: \</span></span><br><span class="line"><span class="string">extra cheese 2.00, \</span></span><br><span class="line"><span class="string">mushrooms 1.50 \</span></span><br><span class="line"><span class="string">sausage 3.00 \</span></span><br><span class="line"><span class="string">canadian bacon 3.50 \</span></span><br><span class="line"><span class="string">AI sauce 1.50 \</span></span><br><span class="line"><span class="string">peppers 1.00 \</span></span><br><span class="line"><span class="string">Drinks: \</span></span><br><span class="line"><span class="string">coke 3.00, 2.00, 1.00 \</span></span><br><span class="line"><span class="string">sprite 3.00, 2.00, 1.00 \</span></span><br><span class="line"><span class="string">bottled water 5.00 \</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span>&#125; ]  <span class="comment"># accumulate messages</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">inp = pn.widgets.TextInput(value=<span class="string">&quot;Hi&quot;</span>, placeholder=<span class="string">&#x27;Enter text here…&#x27;</span>)</span><br><span class="line">button_conversation = pn.widgets.Button(name=<span class="string">&quot;Chat!&quot;</span>)</span><br><span class="line"></span><br><span class="line">interactive_conversation = pn.bind(collect_messages, button_conversation)</span><br><span class="line"></span><br><span class="line">dashboard = pn.Column(</span><br><span class="line">    inp,</span><br><span class="line">    pn.Row(button_conversation),</span><br><span class="line">    pn.panel(interactive_conversation, loading_indicator=<span class="literal">True</span>, height=<span class="number">300</span>),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">dashboard</span><br></pre></td></tr></table></figure>
<p>上述代码可以进行多轮对话。</p>
<p>对话结束后，可以通过复制上下文的方式，总结对话的内容。</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">messages =  context.copy()</span><br><span class="line">messages.append(</span><br><span class="line">&#123;<span class="string">&#x27;role&#x27;</span>:<span class="string">&#x27;system&#x27;</span>, <span class="string">&#x27;content&#x27;</span>:<span class="string">&#x27;create a json summary of the previous food order. Itemize the price for each item\</span></span><br><span class="line"><span class="string"> The fields should be 1) pizza, include size 2) list of toppings 3) list of drinks, include size   4) list of sides include size  5)total price &#x27;</span>&#125;,    </span><br><span class="line">)</span><br><span class="line"> <span class="comment">#The fields should be 1) pizza, price 2) list of toppings 3) list of drinks, include size include price  4) list of sides include size include price, 5)total price &#x27;&#125;,    </span></span><br><span class="line"></span><br><span class="line">response = get_completion_from_messages(messages, temperature=<span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(response)</span><br></pre></td></tr></table></figure>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>本文介绍了使用模型实施一些定制化任务，如给客户回复量身定制的邮件，个性化的聊天机器人。</p>
<p>简单的一个函数就可以构造一个个性化的聊天机器人，OpenAI 提供的 API 非常强大。</p>
<p>这些强大的应用让我们意识到，大部分简单的工作如发邮件、不太简单的工作如点餐等都可以被 ChatGPT 取代。</p>
<h1 id="课程总结"><a href="#课程总结" class="headerlink" title="课程总结"></a>课程总结</h1><p>本讲是最后一讲。《基于 ChatGPT 的 Prompt 工程》系列课程主要介绍了 Prompt 的两条方针，分别是：</p>
<ul>
<li>简洁且具体的指令，</li>
<li>让模型有时间“思考”。</li>
</ul>
<p>接着，课程通过两个示例解释了迭代式提示工程（iterative prompt engineering），并且展示了 ChatGPT 的四个能力：总结 summarization、推断 inferring、转换 transformation、拓展 expanding。</p>
<p>最后，课程介绍了使用模型实施一些定制化任务。</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul>
<li><a target="_blank" rel="noopener" href="https://learn.deeplearning.ai/chatgpt-prompt-eng/lesson/7/expanding">7. expanding</a></li>
<li><a target="_blank" rel="noopener" href="https://learn.deeplearning.ai/chatgpt-prompt-eng/lesson/8/chatbot">8. chat bot</a></li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://LuoRongLuoRong.github.io">LuoRongLuoRong</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://luorongluorong.github.io/2023/05/05/llm/chatgpt_prompt_engineering/lec05_chatbot/">https://luorongluorong.github.io/2023/05/05/llm/chatgpt_prompt_engineering/lec05_chatbot/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://LuoRongLuoRong.github.io" target="_blank">LuoRongLuoRong</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/ChatGPT/">ChatGPT</a><a class="post-meta__tags" href="/tags/Prompt/">Prompt</a></div><div class="post_share"><div class="social-share" data-image="/static/llm/chatgpt_prompt.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2023/05/04/llm/chatgpt_prompt_engineering/lec04_transforming/" title="基于 ChatGPT 的 Prompt 工程：文本转换任务"><img class="cover" src="/static/llm/chatgpt_prompt.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">基于 ChatGPT 的 Prompt 工程：文本转换任务</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2023/05/01/llm/chatgpt_prompt_engineering/lec01_guideline/" title="基于 ChatGPT 的 Prompt 工程：指导方针"><img class="cover" src="/static/llm/chatgpt_prompt.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-01</div><div class="title">基于 ChatGPT 的 Prompt 工程：指导方针</div></div></a></div><div><a href="/2023/05/03/llm/chatgpt_prompt_engineering/lec03_inferring/" title="基于 ChatGPT 的 Prompt 工程：情感推断、信息提取"><img class="cover" src="/static/llm/chatgpt_prompt.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-03</div><div class="title">基于 ChatGPT 的 Prompt 工程：情感推断、信息提取</div></div></a></div><div><a href="/2023/05/02/llm/chatgpt_prompt_engineering/lec02_iterative_prompt_development/" title="基于 ChatGPT 的 Prompt 工程：迭代式 Prompt 开发——实例展示"><img class="cover" src="/static/llm/chatgpt_prompt.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-02</div><div class="title">基于 ChatGPT 的 Prompt 工程：迭代式 Prompt 开发——实例展示</div></div></a></div><div><a href="/2023/05/04/llm/chatgpt_prompt_engineering/lec04_transforming/" title="基于 ChatGPT 的 Prompt 工程：文本转换任务"><img class="cover" src="/static/llm/chatgpt_prompt.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-04</div><div class="title">基于 ChatGPT 的 Prompt 工程：文本转换任务</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">LuoRongLuoRong</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">33</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">53</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/LuoRongLuoRong"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/LuoRongLuoRong" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:luorongfamily@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>简介</span></div><div class="announcement_content">复旦大学计算机软件与理论硕士</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%87%8F%E8%BA%AB%E5%AE%9A%E5%88%B6%E7%9A%84%E9%82%AE%E4%BB%B6"><span class="toc-text">量身定制的邮件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#temperature"><span class="toc-text">temperature</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%81%8A%E5%A4%A9%E6%9C%BA%E5%99%A8%E4%BA%BA"><span class="toc-text">聊天机器人</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%81%8A%E5%A4%A9%E6%9C%BA%E5%99%A8%E4%BA%BA-1"><span class="toc-text">聊天机器人</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%82%B9%E9%A4%90%E6%9C%BA%E5%99%A8%E4%BA%BA"><span class="toc-text">点餐机器人</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-text">总结</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AF%BE%E7%A8%8B%E6%80%BB%E7%BB%93"><span class="toc-text">课程总结</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-text">参考</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/05/05/llm/chatgpt_prompt_engineering/lec05_chatbot/" title="基于 ChatGPT 的 Prompt 工程：定制化任务"><img src="/static/llm/chatgpt_prompt.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="基于 ChatGPT 的 Prompt 工程：定制化任务"/></a><div class="content"><a class="title" href="/2023/05/05/llm/chatgpt_prompt_engineering/lec05_chatbot/" title="基于 ChatGPT 的 Prompt 工程：定制化任务">基于 ChatGPT 的 Prompt 工程：定制化任务</a><time datetime="2023-05-05T04:39:19.000Z" title="发表于 2023-05-05 12:39:19">2023-05-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/05/04/llm/chatgpt_prompt_engineering/lec04_transforming/" title="基于 ChatGPT 的 Prompt 工程：文本转换任务"><img src="/static/llm/chatgpt_prompt.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="基于 ChatGPT 的 Prompt 工程：文本转换任务"/></a><div class="content"><a class="title" href="/2023/05/04/llm/chatgpt_prompt_engineering/lec04_transforming/" title="基于 ChatGPT 的 Prompt 工程：文本转换任务">基于 ChatGPT 的 Prompt 工程：文本转换任务</a><time datetime="2023-05-04T04:39:19.000Z" title="发表于 2023-05-04 12:39:19">2023-05-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/05/03/llm/chatgpt_prompt_engineering/lec03_inferring/" title="基于 ChatGPT 的 Prompt 工程：情感推断、信息提取"><img src="/static/llm/chatgpt_prompt.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="基于 ChatGPT 的 Prompt 工程：情感推断、信息提取"/></a><div class="content"><a class="title" href="/2023/05/03/llm/chatgpt_prompt_engineering/lec03_inferring/" title="基于 ChatGPT 的 Prompt 工程：情感推断、信息提取">基于 ChatGPT 的 Prompt 工程：情感推断、信息提取</a><time datetime="2023-05-03T04:39:19.000Z" title="发表于 2023-05-03 12:39:19">2023-05-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/05/02/llm/chatgpt_prompt_engineering/lec02_iterative_prompt_development/" title="基于 ChatGPT 的 Prompt 工程：迭代式 Prompt 开发——实例展示"><img src="/static/llm/chatgpt_prompt.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="基于 ChatGPT 的 Prompt 工程：迭代式 Prompt 开发——实例展示"/></a><div class="content"><a class="title" href="/2023/05/02/llm/chatgpt_prompt_engineering/lec02_iterative_prompt_development/" title="基于 ChatGPT 的 Prompt 工程：迭代式 Prompt 开发——实例展示">基于 ChatGPT 的 Prompt 工程：迭代式 Prompt 开发——实例展示</a><time datetime="2023-05-02T04:39:19.000Z" title="发表于 2023-05-02 12:39:19">2023-05-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/05/01/llm/chatgpt_prompt_engineering/lec01_guideline/" title="基于 ChatGPT 的 Prompt 工程：指导方针"><img src="/static/llm/chatgpt_prompt.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="基于 ChatGPT 的 Prompt 工程：指导方针"/></a><div class="content"><a class="title" href="/2023/05/01/llm/chatgpt_prompt_engineering/lec01_guideline/" title="基于 ChatGPT 的 Prompt 工程：指导方针">基于 ChatGPT 的 Prompt 工程：指导方针</a><time datetime="2023-05-01T04:39:19.000Z" title="发表于 2023-05-01 12:39:19">2023-05-01</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By LuoRongLuoRong</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'Pmg8eHZ9JK6jSBoYLIjscbQU-gzGzoHsz',
      appKey: 'XubQmnCvDfsKzore8IzN9ALO',
      avatar: 'monsterid',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: true
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="false" data-text="❤,🧡,💛,💚,💙,💜,🤎,🖤,🤍,💖,💘,💝,💖" data-fontsize="15px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>